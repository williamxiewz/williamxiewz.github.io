{"title":"iOS 定位以及地图应用","uid":"a8f837f695eb86dad5d7620558fa20f8","slug":"iOS-定位以及地图应用","date":"2016-08-21T11:18:05.000Z","updated":"2019-05-14T04:53:31.000Z","comments":true,"path":"api/articles/iOS-定位以及地图应用.json","keywords":null,"cover":[],"content":"<p>#定位服务</p>\n<p>现在的移动设备大多都提供定位服务功能，使用iOS系统的iPhone,iPod touch和iPad<br>都可以提供位置服务，iOS设备能提供3种不同途径进行定位:</p>\n<ul>\n<li><p>WiFi定位：通过査饰一个wiFi路th器的地理位置的信息，比较省电。iPhoneiPod touch和ipad都可以采用。 </p>\n</li>\n<li><p>蜂窝式移动电活基站定位：通过移动运用商基站定位。只有iPhone,3G版本的<br>iPod touch和iPad可以采用。 </p>\n</li>\n<li><p>GPS卫星定位：通过3〜4颗GPS卫星定位，最为准确，但是耗电量大，不能遮挡。 iPhone,iPod Touch和iPad都可以采用。 </p>\n</li>\n<li><p>iBeacon微定位：苹果公司在iOS 7开始支持iBeacon技术，iBeacon技术是苹果研<br>发,它使用低功耗蓝牙技术，通过多个iBeacon基站可以创建一个信号区域（地理围<br>栏) 设备进入该区域时，相应的应用程序便会提示用户进入了这个地理围栏。 </p>\n</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>iOS不像Android系统在定位服务编程时候，可以指定采用哪种途径进行定位。iOS的API把底层这些细节屏蔽掉了，开发人员和用户并不知道现在设备采用哪种方式进行定位,<br>iOS系统会根据设备的情况和周圃的环境，采用一套最佳的解决方案。这个方案是这样:如果能够接收GPS信息，那么设备优先采用GPS定位，否则采用WiFi或蜂窝基站定位。在WiFi和蜂窝基站之间优先使用WiFi，如果无法连接WiFi才使用蜂窝基站定位。</p></blockquote>\n<span id=\"more\"></span>\n\n<p>##CoreLocation </p>\n<p>#地图服务</p>\n<p>##MapKit</p>\n<p>#Xcode Resource </p>\n<p>##GPX File </p>\n<p><a href=\"https://zh.wikipedia.org/zh-cn/GPX\">GPX档案格式</a>（GPS Exchange Format）是XML格式的一种，专门用来储存地理资讯。 一个GPX档案当中可能包含一些路点（<code>waypoint</code>）及一些轨迹点（<code>trackpoint</code>）。 以全球定位系统（GPS装置）所产生的GPX档为例， 路点可能是各自独立互不相干的重要标记点， 例如照相的地点或使用者手动标记的休息站或路口等等；至于GPS装置自动定时记录的则是轨迹点。 有顺序的一串轨迹点构成一个轨迹（<code>track</code>）或者路程（<code>route</code>）。轨迹是一个人曾经走过的记录，可能包含走错的路等等；路程则经常是建议未来用路人可以走的路径。所以，一般来讲，轨迹里的点，包含时间信息，路程里的点，则没有时间信息。</p>\n<p>GPX文件内的点，至少要包含经纬度座标两项资讯；其它字段都是可有可无的。</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span>xml version<span class=\"token operator\">=</span><span class=\"token string\">\"1.0\"</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"UTF-8\"</span> standalone<span class=\"token operator\">=</span><span class=\"token string\">\"no\"</span> <span class=\"token operator\">?</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>gpx xmlns<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.topografix.com/GPX/1/1\"</span> creator<span class=\"token operator\">=</span><span class=\"token string\">\"MyGeoPosition.com\"</span> version<span class=\"token operator\">=</span><span class=\"token string\">\"1.1\"</span> xmlns<span class=\"token punctuation\">:</span>xsi<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span> xsi<span class=\"token punctuation\">:</span>schemaLocation<span class=\"token operator\">=</span><span class=\"token string\">\"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>wpt lat<span class=\"token operator\">=</span><span class=\"token string\">\"23.0920790\"</span> lon<span class=\"token operator\">=</span><span class=\"token string\">\"113.3010790\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>中国广州市海珠区滨江路中山大学 邮政编码<span class=\"token punctuation\">:</span> <span class=\"token number\">510305</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>src<span class=\"token operator\">></span><span class=\"token builtin\">MyGeoPosition</span><span class=\"token punctuation\">.</span>com<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>src<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>link<span class=\"token operator\">></span>http<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>mygeoposition<span class=\"token punctuation\">.</span>com<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>link<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>wpt<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>gpx<span class=\"token operator\">></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><code>&lt;wpt&gt;</code>标签中的<code>lat</code>属性设置纬度,<code>lon</code>属性设置经度。一般使用<a href=\"https://www.mygeoposition.com/\">www.mygeoposition.com</a>网站提供的GPX工具.这个网站免费提供地理信息编码和反编码,生成KML和GPX文件等服务.</p>\n<p>可以在KML/GPX 标签下载KML文件或者GPX文件.</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>使用方法:</p></blockquote>\n<ul>\n<li>选择Shceme&gt; Run &gt;Options&gt;Default Location &gt; Add GPX File tp Project </li>\n<li>运行项目&gt; Debug Area &gt; Arrow &gt; Add GPX File tp Project </li>\n</ul>\n<p>##GeoJSON File</p>\n<p>GeoJSON是一种对各种地理数据结构进行编码的格式。GeoJSON对象可以表示几何、特征或者特征集合。GeoJSON支持下面几何类型：点、线、面、多点、多线、多面和几何集合。GeoJSON里的特征包含一个几何对象和其他属性，特征集合表示一系列特征。</p>\n<p>一个完整的GeoJSON数据结构总是一个（JSON术语里的）对象。在GeoJSON里，对象由名/值对–也称作成员的集合组成。对每个成员来说，名字总是字符串。成员的值要么是字符串、数字、对象、数组，要么是下面文本常量中的一个：”true”,”false”和”null”。数组是由值是上面所说的元素组成。</p>\n<p><a href=\"http://www.oschina.net/translate/geojson-spec?cmp\">GeoJSON格式规范说明</a></p>\n<p>###Geojson使用</p>\n<p>最近AppStore在上传新应用的时候对于地图类的应用需要上传一个.geojson格式的文件，该文件是对区域作限制的文件，只有在该文件中规定的区域范围内才能下载该应用，否则是不能下载该应用的。</p>\n<p><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/appledevelopgeojson1.png\"></p>\n<p>那问题来了，如何才能生成该格式的问价呢?下面我们来看一下如何生成该格式的文件<br>和创建viewcontroller文件方式相同，右键new File 选择Resource第一个就是我们需要的文件如下图。</p>\n<p><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/appledevelopgeojson2.png\"></p>\n<p>创建完成后需要在文件中设置支持下载的区域的经纬度坐标，如下：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">&#123;</span>\n   <span class=\"token string\">\"type\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"MultiPolygon\"</span>,\n   <span class=\"token string\">\"coordinates\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n                  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token punctuation\">[</span><span class=\"token number\">55.06</span>, <span class=\"token number\">55.67</span><span class=\"token punctuation\">]</span>, <span class=\"token punctuation\">[</span><span class=\"token number\">152.51</span>, <span class=\"token number\">55.67</span><span class=\"token punctuation\">]</span>, <span class=\"token punctuation\">[</span><span class=\"token number\">152.51</span>, <span class=\"token number\">8.2</span><span class=\"token punctuation\">]</span>, <span class=\"token punctuation\">[</span><span class=\"token number\">55.06</span>, <span class=\"token number\">8.2</span><span class=\"token punctuation\">]</span>, <span class=\"token punctuation\">[</span><span class=\"token number\">55.06</span>, <span class=\"token number\">55.67</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n                  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>　　注意：<br>　　(1)坐标位置第一个和最后一个必须相同，在这些坐标围成的区域是有效部分。</p>\n<p><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/appledevelopgeojson3.jpg\"></p>\n<p>　　(2)创建geojson文件的时候，文件名必须使用系统默认创建的文件名</p>\n","text":"#定位服务 现在的移动设备大多都提供定位服务功能，使用iOS系统的iPhone,iPod touch和iPad都可以提供位置服务，iOS设备能提供3种不同途径进行定位: WiFi定位：通过査饰一个wiFi路th器的地理位置的信息，比较省电。iPhoneiPod touch和ipa...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"iOS SDK","slug":"iOS-SDK","count":18,"path":"api/categories/iOS-SDK.json"}],"tags":[{"name":"MapKit","slug":"MapKit","count":1,"path":"api/tags/MapKit.json"},{"name":"CoreLocation","slug":"CoreLocation","count":1,"path":"api/tags/CoreLocation.json"}],"toc":"","author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}},"mapped":true,"prev_post":{"title":"Mac 系统上编译 iOS 可用的FFmpeg 库","uid":"be9c948da683d2b10fcb2164adbb9d8b","slug":"Mac-系统上编译-iOS-可用的FFmpeg-库","date":"2016-08-24T07:32:07.000Z","updated":"2019-05-14T04:53:29.000Z","comments":true,"path":"api/articles/Mac-系统上编译-iOS-可用的FFmpeg-库.json","keywords":null,"cover":[],"text":"原文转载 1、gas-preprocessor2、yasm 1.2.03、FFmpeg-iOS-build-script（ps:这个脚本真是业界良心呀，帮我们省下了不少心。） 好了，已经有了，但是怎么优雅的使用出招式呢？慢慢来，博主力求详细的为大家分解每个步骤。 #1、下载gas...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"FFmpeg","slug":"FFmpeg","count":1,"path":"api/tags/FFmpeg.json"}],"author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}}},"next_post":{"title":"iOS 软件测试之 UI Testing","uid":"1199814c7a99dde10c071bb5aa7837b1","slug":"iOS-软件测试之-UI-Testing","date":"2016-08-19T09:27:25.000Z","updated":"2016-08-19T10:02:01.000Z","comments":true,"path":"api/articles/iOS-软件测试之-UI-Testing.json","keywords":null,"cover":[],"text":" 本文译自:iOS9 Day-by-Day :: Day 2 :: UI Testing 在任何软件的开发中，自动化UI测试都是很重要的。它能快速发现你应用中的问题，在发布之前进行一次成功的配套测试能减少许多问题。在iOS平台目前是通过UIAutomation来完成自动化测试，它...","link":"","photos":[],"count_time":{"symbolsCount":"5.7k","symbolsTime":"5 mins."},"categories":[{"name":"iOS SDK","slug":"iOS-SDK","count":18,"path":"api/categories/iOS-SDK.json"}],"tags":[{"name":"软件测试","slug":"软件测试","count":1,"path":"api/tags/软件测试.json"},{"name":"UI Testing","slug":"UI-Testing","count":1,"path":"api/tags/UI-Testing.json"}],"author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}}}}