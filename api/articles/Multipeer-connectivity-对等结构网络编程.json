{"title":"Multipeer connectivity 对等结构网络编程","uid":"89f1cad59352c7f82ca21656f76e183c","slug":"Multipeer-connectivity-对等结构网络编程","date":"2016-08-10T10:58:32.000Z","updated":"2016-08-22T15:37:47.000Z","comments":true,"path":"api/articles/Multipeer-connectivity-对等结构网络编程.json","keywords":null,"cover":null,"content":"<p>#对等结构网络 </p>\n<p>对等结构网络是苹果的<a href=\"https://zh.wikipedia.org/zh-cn/%E7%84%A1%E7%B7%9A%E9%9A%A8%E6%84%8F%E7%B6%B2%E8%B7%AF\">Ad Hoc</a>网络的一种,是在小空间里构建无限网络的解决方案。苹果公司的GameKit或Multipeer Connectivity(多点连接）框架中提供了开发这种网络的APi.</p>\n<p>在iOS7中，引入了一个全新的框架——Multipeer Connectivity(多点连接)。利用Multipeer Connectivity框架，即使在没有连接到WiFi（WLAN）或移动网络（xG）的情况下，距离较近的Apple设备（iMac/iPad/iPhone）之间可基于蓝牙和WiFi（P2P WiFi）技术进行发现和连接实现近场通信。</p>\n<span id=\"more\"></span>\n<p>Multipeer Connectivity扩充的功能与利用AirDrop传输文件非常类似，可以将其看作AirDrop不能直接使用的补偿，代价是需要自己实现。</p>\n<p>多点连接网络,每个点都足对等的,每个对等点都通过”广播服务”和”搜索服务”,</p>\n<p>“广播服务”的目的是为了能够被其他端点搜索到，”搜索服务”的目的是为了是能够搜索到其他端点。 </p>\n<p>当捜索到其他的端点,可以请求建立连接，连接一旦创建.会话（session)也就建义起来了。会话是与网络中运行应用的对等点对应的，每一对等点都会有一个PeerhId作为标示区别彼此。 </p>\n<p>多点连接网络在苹果设备之间进行连接时,链路层采用蓝牙或WiFi实现,并采用 Bonjour发现服务。这些对于开发人员是不可见的,开发人员不用关心它们的细节问题。<br>另外，采用蓝牙连接的对等网络在数据传输时，传输的距离有限制。 </p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>在Multipeer connectivity框架中主要的类如下:</p></blockquote>\n<ul>\n<li>MCSession:描述连接的会话对象，一个设备的应用创建了会话对象，就可以邀请其他设备加入。 </li>\n<li>MCNearbyServiceAdvertiser :服务广播对象，广播服务告诉附近的对等点，它可以<br>被搜索到。</li>\n<li>MCAdvertiserAssistant:服务广播对象助手类,提供iOS标准要求的确认对话框界面。</li>\n<li>MCNearbyServiceBrowser:服务搜索对象，能够搜索附近发出广播服务的对等点，  </li>\n<li>MCBrowserViewController:提供ios标准搜索界面，通过该界面能够捜索到附近广播服务的对等点，并能够请求连接。</li>\n<li>MCPeerID:PeerId类，在多点连接网格中对等点的唯一标识peerld。 </li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Multipeer Connectivity框架中上述类相关的协议：</p></blockquote>\n<ul>\n<li>MCSessionDelegate: MCSession的委托协议。</li>\n<li>MCNearbyServiceAdvertiserDelcgale: MCNearbyServiceAdvertiser的委托协议。</li>\n<li>MCNearbvServiceBrowserDelegate: MCNearbyServiceBrowser的委托协议。 </li>\n<li>MCBrowserViewControllerDelegate: MCBrowserViewController的委托协议。</li>\n</ul>\n<p>#P2PGame游戏</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">MultipeerConnectivity</span>\n\n<span class=\"token keyword\">let</span>  <span class=\"token constant\">GAMING</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>          <span class=\"token comment\">//游戏进行中</span>\n<span class=\"token keyword\">let</span>  <span class=\"token constant\">GAMED</span>  <span class=\"token operator\">=</span> <span class=\"token number\">1</span>          <span class=\"token comment\">//游戏结束</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ViewController</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIViewController</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">MCSessionDelegate</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">MCBrowserViewControllerDelegate</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">UIAlertViewDelegate</span> <span class=\"token punctuation\">&#123;</span>\n    \n    <span class=\"token atrule\">@IBOutlet</span> <span class=\"token keyword\">weak</span> <span class=\"token keyword\">var</span> lblTimer<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UILabel</span><span class=\"token operator\">!</span>\n    <span class=\"token atrule\">@IBOutlet</span> <span class=\"token keyword\">weak</span> <span class=\"token keyword\">var</span> lblPlayer2<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UILabel</span><span class=\"token operator\">!</span>\n    <span class=\"token atrule\">@IBOutlet</span> <span class=\"token keyword\">weak</span> <span class=\"token keyword\">var</span> lblPlayer1<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UILabel</span><span class=\"token operator\">!</span>\n    \n    <span class=\"token atrule\">@IBOutlet</span> <span class=\"token keyword\">weak</span> <span class=\"token keyword\">var</span> btnConnect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIButton</span><span class=\"token operator\">!</span>\n    <span class=\"token atrule\">@IBOutlet</span> <span class=\"token keyword\">weak</span> <span class=\"token keyword\">var</span> btnClick<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIButton</span><span class=\"token operator\">!</span>\n    \n    <span class=\"token keyword\">var</span> timer <span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSTimer</span><span class=\"token operator\">!</span>\n    \n    <span class=\"token keyword\">let</span> serviceType <span class=\"token operator\">=</span> <span class=\"token string\">\"P2PGame-service\"</span>\n    \n    <span class=\"token keyword\">var</span> serviceBrowser <span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCBrowserViewController</span><span class=\"token operator\">!</span>\n    <span class=\"token keyword\">var</span> assistant <span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCAdvertiserAssistant</span><span class=\"token operator\">!</span>\n    <span class=\"token keyword\">var</span> session <span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCSession</span><span class=\"token operator\">!</span>\n    <span class=\"token keyword\">var</span> peerID<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCPeerID</span><span class=\"token operator\">!</span>\n    \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">viewDidLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">viewDidLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        \n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">clearUI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        \n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>peerID <span class=\"token operator\">=</span> <span class=\"token function\">MCPeerID</span><span class=\"token punctuation\">(</span>displayName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIDevice</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentDevice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>session <span class=\"token operator\">=</span> <span class=\"token function\">MCSession</span><span class=\"token punctuation\">(</span>peer<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>peerID<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span>delegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        \n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>serviceBrowser <span class=\"token operator\">=</span> <span class=\"token function\">MCBrowserViewController</span><span class=\"token punctuation\">(</span>serviceType<span class=\"token punctuation\">:</span> serviceType<span class=\"token punctuation\">,</span> session<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>serviceBrowser<span class=\"token punctuation\">.</span>delegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        \n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>assistant <span class=\"token operator\">=</span> <span class=\"token function\">MCAdvertiserAssistant</span><span class=\"token punctuation\">(</span>serviceType<span class=\"token punctuation\">:</span> serviceType<span class=\"token punctuation\">,</span> discoveryInfo<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">,</span> session<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>assistant<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        \n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">didReceiveMemoryWarning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">didReceiveMemoryWarning</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token atrule\">@IBAction</span> <span class=\"token keyword\">func</span> <span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">AnyObject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        \n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">var</span> <span class=\"token builtin\">count</span><span class=\"token punctuation\">:</span><span class=\"token builtin\">Int</span> <span class=\"token operator\">=</span> <span class=\"token function\">Int</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblPlayer1<span class=\"token punctuation\">.</span>text<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblPlayer1<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span> <span class=\"token string\">\"%i\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">++</span><span class=\"token builtin\">count</span><span class=\"token punctuation\">)</span>\n            \n            <span class=\"token keyword\">let</span> sendStr <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span><span class=\"token string\">\"&#123;\\\"code\\\":%i,\\\"count\\\":%i&#125;\"</span><span class=\"token punctuation\">,</span><span class=\"token constant\">GAMING</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">count</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> sendStr<span class=\"token punctuation\">.</span><span class=\"token function\">dataUsingEncoding</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">NSUTF8StringEncoding</span><span class=\"token punctuation\">,</span> allowLossyConversion<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            \n            <span class=\"token keyword\">var</span> error <span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSError</span><span class=\"token operator\">?</span>\n\n            <span class=\"token keyword\">try</span><span class=\"token operator\">!</span>  <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span><span class=\"token function\">sendData</span><span class=\"token punctuation\">(</span>data<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> toPeers<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span>connectedPeers<span class=\"token punctuation\">,</span> withMode<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token builtin\">Unreliable</span><span class=\"token punctuation\">)</span>\n            \n            <span class=\"token keyword\">if</span> error <span class=\"token operator\">!=</span> <span class=\"token constant\">nil</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function\">NSLog</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error sending data:  %@\"</span><span class=\"token punctuation\">,</span> error<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>localizedDescription<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    \n    <span class=\"token atrule\">@IBAction</span> <span class=\"token keyword\">func</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">:</span> <span class=\"token builtin\">AnyObject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">presentViewController</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>serviceBrowser<span class=\"token punctuation\">,</span> animated<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//清除UI画面上的数据</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">clearUI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>btnClick<span class=\"token punctuation\">.</span>enabled <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblPlayer1<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblPlayer2<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblTimer<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string\">\"30s\"</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>timer <span class=\"token operator\">!=</span> <span class=\"token constant\">nil</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">.</span><span class=\"token function\">invalidate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//更新计时器</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">updateTimer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        \n        <span class=\"token keyword\">var</span> strRemainTime <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblTimer<span class=\"token punctuation\">.</span>text<span class=\"token operator\">!</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">NSString</span>\n        <span class=\"token keyword\">let</span> len <span class=\"token operator\">=</span> strRemainTime<span class=\"token punctuation\">.</span>length\n        strRemainTime <span class=\"token operator\">=</span> strRemainTime<span class=\"token punctuation\">.</span><span class=\"token function\">substringToIndex</span><span class=\"token punctuation\">(</span>len <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        \n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">var</span> remainTime<span class=\"token punctuation\">:</span><span class=\"token builtin\">Int</span> <span class=\"token operator\">=</span> <span class=\"token function\">Int</span><span class=\"token punctuation\">(</span>strRemainTime <span class=\"token keyword\">as</span><span class=\"token operator\">!</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            remainTime<span class=\"token operator\">--</span>\n            <span class=\"token comment\">//剩余时间为0 比赛结束</span>\n            <span class=\"token keyword\">if</span> remainTime <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">&#123;</span>\n                \n                <span class=\"token keyword\">var</span> player1 <span class=\"token operator\">=</span> <span class=\"token function\">Int</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblPlayer1<span class=\"token punctuation\">.</span>text<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">var</span> player2 <span class=\"token operator\">=</span> <span class=\"token function\">Int</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblPlayer2<span class=\"token punctuation\">.</span>text<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">var</span> msg <span class=\"token operator\">=</span> <span class=\"token string\">\"平手\"</span>\n                \n                <span class=\"token keyword\">if</span> player1 <span class=\"token operator\">></span> player2 <span class=\"token punctuation\">&#123;</span>\n                    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"我获胜\"</span>\n                <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> player1 <span class=\"token operator\">&lt;</span> player2 <span class=\"token punctuation\">&#123;</span>\n                    msg <span class=\"token operator\">=</span> <span class=\"token string\">\"对手获胜\"</span>\n                <span class=\"token punctuation\">&#125;</span>\n                \n                <span class=\"token keyword\">let</span> alerView <span class=\"token operator\">=</span> <span class=\"token function\">UIAlertView</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Game Over.\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">:</span>msg<span class=\"token punctuation\">,</span> delegate<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> cancelButtonTitle<span class=\"token punctuation\">:</span> <span class=\"token string\">\"OK\"</span><span class=\"token punctuation\">)</span>\n                alerView<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                \n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">clearUI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                \n            <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblTimer<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span> <span class=\"token string\">\"%is\"</span><span class=\"token punctuation\">,</span> remainTime<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//MARK: --实现UIAlertViewDelegate协议</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">alertView</span><span class=\"token punctuation\">(</span>alertView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIAlertView</span><span class=\"token punctuation\">,</span> clickedButtonAtIndex buttonIndex<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        \n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>btnClick<span class=\"token punctuation\">.</span>enabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token builtin\">NSTimer</span><span class=\"token punctuation\">.</span><span class=\"token function\">scheduledTimerWithTimeInterval</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n            selector<span class=\"token punctuation\">:</span> <span class=\"token string\">\"updateTimer\"</span><span class=\"token punctuation\">,</span>\n            userInfo<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">,</span> repeats<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n        \n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//MARK: --实现MCSessionDelegate协议</span>\n    <span class=\"token comment\">//端点状态变化</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">session</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCSession</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> peer peerID<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCPeerID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> didChangeState state<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCSessionState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  \n        <span class=\"token keyword\">var</span> logmsg <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n        \n        <span class=\"token keyword\">switch</span> state <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token builtin\">NotConnected</span><span class=\"token punctuation\">:</span>\n            logmsg <span class=\"token operator\">=</span> <span class=\"token string\">\"断开连接\"</span>\n            <span class=\"token function\">dispatch_async</span><span class=\"token punctuation\">(</span><span class=\"token function\">dispatch_get_main_queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>btnClick<span class=\"token punctuation\">.</span>enabled <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token builtin\">Connecting</span><span class=\"token punctuation\">:</span>\n            logmsg <span class=\"token operator\">=</span> <span class=\"token string\">\"连接中...\"</span>\n        <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token builtin\">Connected</span><span class=\"token punctuation\">:</span>\n            logmsg <span class=\"token operator\">=</span> <span class=\"token string\">\"已连接\"</span>\n            <span class=\"token function\">dispatch_async</span><span class=\"token punctuation\">(</span><span class=\"token function\">dispatch_get_main_queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>btnClick<span class=\"token punctuation\">.</span>enabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token builtin\">NSTimer</span><span class=\"token punctuation\">.</span><span class=\"token function\">scheduledTimerWithTimeInterval</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n                    selector<span class=\"token punctuation\">:</span> <span class=\"token string\">\"updateTimer\"</span><span class=\"token punctuation\">,</span>\n                    userInfo<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">,</span> repeats<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token function\">NSLog</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Peer [%@] changed state to %@\"</span><span class=\"token punctuation\">,</span> peerID<span class=\"token punctuation\">.</span>displayName<span class=\"token punctuation\">,</span> logmsg<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//接收端点数据</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">session</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCSession</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> didReceiveData data<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSData</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> fromPeer peerID<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCPeerID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        \n       <span class=\"token keyword\">let</span> jsonObj <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span><span class=\"token operator\">!</span>  <span class=\"token builtin\">NSJSONSerialization</span><span class=\"token punctuation\">.</span><span class=\"token function\">JSONObjectWithData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span>\n                options<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSJSONReadingOptions</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">MutableContainers</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span><span class=\"token operator\">!</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">String</span> <span class=\"token punctuation\">:</span> <span class=\"token builtin\">AnyObject</span><span class=\"token punctuation\">]</span>\n        \n        <span class=\"token keyword\">let</span> codeObj <span class=\"token operator\">=</span> jsonObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"code\"</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span><span class=\"token operator\">!</span> <span class=\"token builtin\">Int</span>\n        \n        <span class=\"token keyword\">if</span> codeObj <span class=\"token operator\">==</span> <span class=\"token constant\">GAMING</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">let</span> countObj <span class=\"token operator\">=</span> jsonObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span><span class=\"token operator\">!</span> <span class=\"token builtin\">Int</span>\n            <span class=\"token function\">dispatch_async</span><span class=\"token punctuation\">(</span><span class=\"token function\">dispatch_get_main_queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>lblPlayer2<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span> <span class=\"token string\">\"%i\"</span><span class=\"token punctuation\">,</span> countObj<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> codeObj <span class=\"token operator\">==</span> <span class=\"token constant\">GAMED</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">dispatch_async</span><span class=\"token punctuation\">(</span><span class=\"token function\">dispatch_get_main_queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">clearUI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">// 接收端点数据流方式</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">session</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCSession</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> didReceiveStream stream<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSInputStream</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> withName streamName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> fromPeer peerID<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCPeerID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        \n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">// 开始端点接收资源</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">session</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCSession</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> didStartReceivingResourceWithName resourceName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> fromPeer peerID<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCPeerID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> withProgress progress<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSProgress</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        \n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">// 接收端点资源完成</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">session</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCSession</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> didFinishReceivingResourceWithName resourceName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> fromPeer peerID<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCPeerID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> atURL localURL<span class=\"token punctuation\">:</span> <span class=\"token constant\">NSURL</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> withError error<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSError</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        \n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token comment\">//MARK: --实现MCNearbyServiceBrowserDelegate协议</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">browserViewControllerDidFinish</span><span class=\"token punctuation\">(</span>browserViewController<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCBrowserViewController</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">dismissViewControllerAnimated</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">browserViewControllerWasCancelled</span><span class=\"token punctuation\">(</span>browserViewController<span class=\"token punctuation\">:</span> <span class=\"token builtin\">MCBrowserViewController</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">dismissViewControllerAnimated</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    \n<span class=\"token punctuation\">&#125;</span>\n\n\n\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","text":"#对等结构网络 对等结构网络是苹果的Ad Hoc网络的一种,是在小空间里构建无限网络的解决方案。苹果公司的GameKit或Multipeer Connectivity(多点连接）框架中提供了开发这种网络的APi. 在iOS7中，引入了一个全新的框架——Multipeer Conn...","link":"","photos":[],"count_time":{"symbolsCount":"8.1k","symbolsTime":"7 mins."},"categories":[{"name":"iOS网络编程","slug":"iOS网络编程","count":9,"path":"api/categories/iOS网络编程.json"}],"tags":[{"name":"Multipeer connectivity","slug":"Multipeer-connectivity","count":1,"path":"api/tags/Multipeer-connectivity.json"}],"toc":"","author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}},"mapped":true,"prev_post":{"title":"iBeacon 微定位技术","uid":"00d58d9a73e1bc4a1c001712fc4a5ff9","slug":"iBeacon-微定位技术","date":"2016-08-10T11:01:39.000Z","updated":"2019-05-14T04:53:35.000Z","comments":true,"path":"api/articles/iBeacon-微定位技术.json","keywords":null,"cover":[],"text":"在一家大型商场,医院或是大楼里,你是否会曾经有过找不到想要去的地方的经历呢?这种情况下采用上面介绍的传统定位方式,就有些”力不从心”了,首先不能采用GPS定位,而WiFi 和蜂窝式移动电话基站定位误差比较大,这种情况下的定位就是 “微定位”技术了 #地理围栏 微定位技术中一个比较...","link":"","photos":[],"count_time":{"symbolsCount":"8.2k","symbolsTime":"7 mins."},"categories":[{"name":"iOS SDK","slug":"iOS-SDK","count":18,"path":"api/categories/iOS-SDK.json"}],"tags":[{"name":"iBeacon","slug":"iBeacon","count":1,"path":"api/tags/iBeacon.json"}],"author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}}},"next_post":{"title":"Bonjour网络编程","uid":"0cc4b6da7e6dbc367d1a0f5f752f14d7","slug":"Bonjour网络编程","date":"2016-08-10T10:53:34.000Z","updated":"2016-08-22T15:17:53.000Z","comments":true,"path":"api/articles/Bonjour网络编程.json","keywords":null,"cover":null,"text":"#Bonjour 介绍Bonjour(法语”你好’’的意思),它可以使应用不必指定眼务器端口和IP地址就可以以动态发现。 发现眼务是通过特定命名搜索服务的.例如”tony. _tonyipp. _tcp.local”这样的命名，发 现服务命名格式如下： &lt;服务名&gt;.〈...","link":"","photos":[],"count_time":{"symbolsCount":517,"symbolsTime":"1 mins."},"categories":[{"name":"iOS网络编程","slug":"iOS网络编程","count":9,"path":"api/categories/iOS网络编程.json"}],"tags":[{"name":"Bonjour","slug":"Bonjour","count":1,"path":"api/tags/Bonjour.json"}],"author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}}}}