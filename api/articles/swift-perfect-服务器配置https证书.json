{"title":"swift perfect 服务器配置https证书","uid":"bd608e4d5982e160f985ab34e4deb2b6","slug":"swift-perfect-服务器配置https证书","date":"2017-06-02T02:59:57.000Z","updated":"2019-05-14T04:53:29.000Z","comments":true,"path":"api/articles/swift-perfect-服务器配置https证书.json","keywords":null,"cover":[],"content":"<p><a href=\"https://medium.com/@iamjono/easily-secure-your-perfect-server-side-swift-code-with-https-3df86a8cab28\">https://medium.com/@iamjono/easily-secure-your-perfect-server-side-swift-code-with-https-3df86a8cab28</a></p>\n<p>因项目需要须使用https服务，得知阿里云可以免费申请，确实感谢。<br>我们的前提：  1.有阿里云的服务器账号。<br>            2.申请的域名托管在阿里云的云解析服务<br>有了这两个前提申请就方便快捷多了。</p>\n<p>1.登录阿里云–&gt;安全(云盾)–&gt;CA证书服务<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl1.jpeg\"></p>\n<p>2.选择购买证书<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl2.jpeg\"></p>\n<p>3.在配置单中选择 “免费型DV SSL”   证书提供商品牌为:“赛门铁克”<br>                           注意:免费数字证书,最多保护一个明细子域名,不支持通配符，一个阿云帐户最多签发20张免费证书<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl3.png\"></p>\n<p>4.支付 （0元）<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl4.png\"></p>\n<p>5.支付后会看到一条状态为“待完成”的记录，此时千万别以为就可以等待阿里云审核了，其实后面还是有资料要填写的。<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl5.png\"></p>\n<p>6.选择补全.<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl6.png\"></p>\n<p>7.填写相应信息。真实填写就可以了。包括：域名、姓名、邮箱等等。因为我的域名是托管到阿里云解析服务的，所以我的认证方式DNS解析认证。填写完成后才是“待审核”状态，等待就可以了。<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl7.png\"><br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl8.png\"></p>\n<p>8.系统生成证书.填写完毕就是提交审核,<br>阿里云会发生一份邮件给你填写的邮箱,邮件的内容：发送给你的 主机记录和记录值，这个应该是阿里云去做的认证审核。</p>\n<p><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl9.png\"></p>\n<p>9.订单进度<br>我勾选了DNS 证书绑定的域名在阿里云解析产品上,会自动帮我们添加记录.<br>如果没有使用阿里云的DNS域名解析,那手动去添加吧.<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl10.png\"></p>\n<p>10.等待10分钟，此过程阿里云系统会去检测，检测到了就成功，此时你的域名证书记录状态为“已签发”</p>\n<p>11.下载此证书，选择对应的应用服务器，我们用的是nignx，下载后一个压缩文件，里面包含2个文件,xx.pem xx.key。<br><img src=\"https://github.com/williamxiewz/williamxie-github-io/raw/master/swiftperfectssl11.png\"></p>\n<p>12.安装证书,80 端口重定向到https</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> confData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"servers\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\">// Serves Port 80</span>\n        <span class=\"token comment\">// Configuration data for another server which:</span>\n        <span class=\"token comment\">//\t* Redirects all traffic back to the first server.</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"port\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"routes\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">[</span><span class=\"token string\">\"method\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"uri\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"handler\"</span><span class=\"token punctuation\">:</span><span class=\"token builtin\">PerfectHTTPServer</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">HTTPHandler</span><span class=\"token punctuation\">.</span>redirect<span class=\"token punctuation\">,</span><span class=\"token string\">\"base\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"https://localhost\"</span><span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>    \n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Serves Port 443.</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"localhost\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"port\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">443</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"routes\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">[</span><span class=\"token string\">\"method\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"uri\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"handler\"</span><span class=\"token punctuation\">:</span><span class=\"token builtin\">PerfectHTTPServer</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">HTTPHandler</span><span class=\"token punctuation\">.</span>staticFiles<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">[</span><span class=\"token string\">\"method\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"uri\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"handler\"</span><span class=\"token punctuation\">:</span><span class=\"token builtin\">PerfectHTTPServer</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">HTTPHandler</span><span class=\"token punctuation\">.</span>staticFiles<span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">\"documentRoot\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"./webroot\"</span><span class=\"token punctuation\">,</span>\n                 <span class=\"token string\">\"allowResponseFilters\"</span><span class=\"token punctuation\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"tlsConfig\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span>\n                <span class=\"token string\">\"certPath\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"./webroot/cert/21411439650856.pem\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"verifyMode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"peer\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"keyPath\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"./webroot/cert/21411494650856.key\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"cipherList\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4\"</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"runAs\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<ol start=\"13\">\n<li>local build  test </li>\n</ol>\n<p>14.delopy swift perfect</p>\n<p>15.通过https访问，大功告成。</p>\n<p>16.apple ATS 测试</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">nscurl --ats-diagnostics --verbose https://www.konekti-ai.com<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n","text":"https://medium.com/@iamjono/easily-secure-your-perfect-server-side-swift-code-with-https-3df86a8cab28 因项目需要须使用https服务，得知阿里云可以免费申请，确实感谢。我们的前提...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"Swift Perfect","slug":"Swift-Perfect","count":1,"path":"api/categories/Swift-Perfect.json"}],"tags":[{"name":"Https","slug":"Https","count":1,"path":"api/tags/Https.json"},{"name":"Swift perfect","slug":"Swift-perfect","count":1,"path":"api/tags/Swift-perfect.json"},{"name":"EC2","slug":"EC2","count":1,"path":"api/tags/EC2.json"}],"toc":"","author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}},"mapped":true,"prev_post":{"title":"理解霍夫变换(Python 版本)","uid":"6753553a886a9bb3c92807f1b53f3789","slug":"理解霍夫变换-Python-版本","date":"2017-07-21T06:22:25.000Z","updated":"2017-07-21T06:24:37.000Z","comments":true,"path":"api/articles/理解霍夫变换-Python-版本.json","keywords":null,"cover":null,"text":"https://alyssaq.github.io/2014/understanding-hough-transform/ https://zh.wikipedia.org/wiki/霍夫变换 ","link":"","photos":[],"count_time":{"symbolsCount":97,"symbolsTime":"1 mins."},"categories":[{"name":"Self-Driving Car Engieer","slug":"Self-Driving-Car-Engieer","count":1,"path":"api/categories/Self-Driving-Car-Engieer.json"}],"tags":[{"name":"opencv","slug":"opencv","count":1,"path":"api/tags/opencv.json"},{"name":"Hough Transform","slug":"Hough-Transform","count":1,"path":"api/tags/Hough-Transform.json"},{"name":"python","slug":"python","count":1,"path":"api/tags/python.json"}],"author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}}},"next_post":{"title":"Swift 脚本编写","uid":"f096cf8cc9c4e9501d76e168f45cd56c","slug":"Swift-脚本编写","date":"2017-04-02T14:23:30.000Z","updated":"2017-04-02T14:28:43.000Z","comments":true,"path":"api/articles/Swift-脚本编写.json","keywords":null,"cover":null,"text":"老规矩，从 Hello World 开始。 新建一个 Swift 文件，就叫 Hello.swift 吧。使用文本编辑器打开输入以下内容，并保存： #!/usr/bin/env xcrun swiftprintln(“Hello World”) 打开终端，切换到保存 Hello....","link":"","photos":[],"count_time":{"symbolsCount":549,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"swift","slug":"swift","count":1,"path":"api/tags/swift.json"}],"author":{"name":"William Xie","slug":"blog-author","avatar":"/img/author.png","link":"/","description":"","socials":{"github":"https://github.com/williamxiewz","twitter":"https://twitter.com/williamxie_wz","stackoverflow":"http://stackoverflow.com/users/4078104/goingxiebin-jobs","wechat":"","qq":"","weibo":"https://weibo.com/u/2281381063","zhihu":"https://www.zhihu.com/people/williamxiewz","csdn":"https://blog.csdn.net/u014222645","juejin":"https://juejin.cn/user/3280598430133277","customs":{}}}}}